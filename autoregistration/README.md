# Скрипт автоматизирует прошивку и предварительную конфигурацию коммутаторов

## Глоссарий
* агент - программный скрипт, который выполняет проверку и настройку оборудования.
* регистратор - специально установленный свич, через который происходит настройка оборудования.
* DHCP - комплекс приложения по управлению конфигураций ISC DHCP сервера.

## Краткое описание
Агент получает список настраиваемых коммутаторов с интерфейса SWDB через сервер RabbitMQ. Запускает поток предварительной подготовки оборудования, который на регистраторе ищет подключенное оборудование и сверяет его со списком. Далее запускает поток настройки оборудования, заходит на каждый коммутатор и активирует функции: получение ip адреса по DHCP, автоматической прошивки и автоматической загрузки матричной конфигурации. Далее агент в потоке предварительной подготовки оборудования проверяет на коммутаторе правильность версии прошивки и матричной конфигурации. Агент отправляет в интерфейс SWDB, через таблицу autoconfig в БД switchbase, информацию о статусе проверки коммутатора. Завершает поток настройки оборудования и переходит к следующему порту регистратора. При завершении подготовки коммутаторов и проверки всех портов регистратора, агент отправляет в интерфейс SWDB, через таблицу autoconfig в БД switchbase информацию о завершении подготовки оборудования, а также ошибки, если они были.

## Состав
- agent.py - основной файл
- config.json - файл настройки агента
- /modules/ - необходимые модули для работы агента

## Установка
- скрипт копируются в необходимую директорию
- в файле config.json прописать необходимые параметры

## Зависимости
- psycopg2
- pika
- redis

## Автор
- Сидоркин Роман Леонидович (sidorkin.r@orionnet.ru, +7-905-974-3304)

## Схема
![agent_diagram](/uploads/8118c828728f58567b721208ff955089/agent_diagram.jpg)

